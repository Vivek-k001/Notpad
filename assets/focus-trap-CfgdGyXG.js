import{i as S,t as ne,f as re,a as k,g as R}from"./tabbable-DSvioetO.js";/*!
* focus-trap 7.6.1
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function G(r,t){(t==null||t>r.length)&&(t=r.length);for(var i=0,u=Array(t);i<t;i++)u[i]=r[i];return u}function oe(r){if(Array.isArray(r))return G(r)}function ie(r,t,i){return(t=fe(t))in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i,r}function ue(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function se(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J(r,t){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);t&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(r,m).enumerable})),i.push.apply(i,u)}return i}function Q(r){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?J(Object(i),!0).forEach(function(u){ie(r,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(i,u))})}return r}function ce(r){return oe(r)||ue(r)||de(r)||se()}function le(r,t){if(typeof r!="object"||!r)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var u=i.call(r,t||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function fe(r){var t=le(r,"string");return typeof t=="symbol"?t:t+""}function de(r,t){if(r){if(typeof r=="string")return G(r,t);var i={}.toString.call(r).slice(8,-1);return i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set"?Array.from(r):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?G(r,t):void 0}}var X={activateTrap:function(t,i){if(t.length>0){var u=t[t.length-1];u!==i&&u.pause()}var m=t.indexOf(i);m===-1||t.splice(m,1),t.push(i)},deactivateTrap:function(t,i){var u=t.indexOf(i);u!==-1&&t.splice(u,1),t.length>0&&t[t.length-1].unpause()}},ve=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},be=function(t){return(t==null?void 0:t.key)==="Escape"||(t==null?void 0:t.key)==="Esc"||(t==null?void 0:t.keyCode)===27},L=function(t){return(t==null?void 0:t.key)==="Tab"||(t==null?void 0:t.keyCode)===9},pe=function(t){return L(t)&&!t.shiftKey},me=function(t){return L(t)&&t.shiftKey},Z=function(t){return setTimeout(t,0)},ee=function(t,i){var u=-1;return t.every(function(m,c){return i(m)?(u=c,!1):!0}),u},K=function(t){for(var i=arguments.length,u=new Array(i>1?i-1:0),m=1;m<i;m++)u[m-1]=arguments[m];return typeof t=="function"?t.apply(void 0,u):t},B=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},ye=[],ge=function(t,i){var u=(i==null?void 0:i.document)||document,m=(i==null?void 0:i.trapStack)||ye,c=Q({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:pe,isKeyBackward:me},i),n={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},h,y=function(e,a,o){return e&&e[a]!==void 0?e[a]:c[o||a]},N=function(e,a){var o=typeof(a==null?void 0:a.composedPath)=="function"?a.composedPath():void 0;return n.containerGroups.findIndex(function(l){var f=l.container,v=l.tabbableNodes;return f.contains(e)||(o==null?void 0:o.includes(f))||v.find(function(s){return s===e})})},T=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.hasFallback,l=o===void 0?!1:o,f=a.params,v=f===void 0?[]:f,s=c[e];if(typeof s=="function"&&(s=s.apply(void 0,ce(v))),s===!0&&(s=void 0),!s){if(s===void 0||s===!1)return s;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var b=s;if(typeof s=="string"){try{b=u.querySelector(s)}catch(p){throw new Error("`".concat(e,'` appears to be an invalid selector; error="').concat(p.message,'"'))}if(!b&&!l)throw new Error("`".concat(e,"` as selector refers to no known node"))}return b},E=function(){var e=T("initialFocus",{hasFallback:!0});if(e===!1)return!1;if(e===void 0||e&&!S(e,c.tabbableOptions))if(N(u.activeElement)>=0)e=u.activeElement;else{var a=n.tabbableGroups[0],o=a&&a.firstTabbableNode;e=o||T("fallbackFocus")}else e===null&&(e=T("fallbackFocus"));if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},P=function(){if(n.containerGroups=n.containers.map(function(e){var a=ne(e,c.tabbableOptions),o=re(e,c.tabbableOptions),l=a.length>0?a[0]:void 0,f=a.length>0?a[a.length-1]:void 0,v=o.find(function(p){return k(p)}),s=o.slice().reverse().find(function(p){return k(p)}),b=!!a.find(function(p){return R(p)>0});return{container:e,tabbableNodes:a,focusableNodes:o,posTabIndexesFound:b,firstTabbableNode:l,lastTabbableNode:f,firstDomTabbableNode:v,lastDomTabbableNode:s,nextTabbableNode:function(F){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,w=a.indexOf(F);return w<0?O?o.slice(o.indexOf(F)+1).find(function(A){return k(A)}):o.slice(0,o.indexOf(F)).reverse().find(function(A){return k(A)}):a[w+(O?1:-1)]}}}),n.tabbableGroups=n.containerGroups.filter(function(e){return e.tabbableNodes.length>0}),n.tabbableGroups.length<=0&&!T("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(n.containerGroups.find(function(e){return e.posTabIndexesFound})&&n.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},_=function(e){var a=e.activeElement;if(a)return a.shadowRoot&&a.shadowRoot.activeElement!==null?_(a.shadowRoot):a},g=function(e){if(e!==!1&&e!==_(document)){if(!e||!e.focus){g(E());return}e.focus({preventScroll:!!c.preventScroll}),n.mostRecentlyFocusedNode=e,ve(e)&&e.select()}},U=function(e){var a=T("setReturnFocus",{params:[e]});return a||(a===!1?!1:e)},$=function(e){var a=e.target,o=e.event,l=e.isBackward,f=l===void 0?!1:l;a=a||B(o),P();var v=null;if(n.tabbableGroups.length>0){var s=N(a,o),b=s>=0?n.containerGroups[s]:void 0;if(s<0)f?v=n.tabbableGroups[n.tabbableGroups.length-1].lastTabbableNode:v=n.tabbableGroups[0].firstTabbableNode;else if(f){var p=ee(n.tabbableGroups,function(I){var x=I.firstTabbableNode;return a===x});if(p<0&&(b.container===a||S(a,c.tabbableOptions)&&!k(a,c.tabbableOptions)&&!b.nextTabbableNode(a,!1))&&(p=s),p>=0){var F=p===0?n.tabbableGroups.length-1:p-1,O=n.tabbableGroups[F];v=R(a)>=0?O.lastTabbableNode:O.lastDomTabbableNode}else L(o)||(v=b.nextTabbableNode(a,!1))}else{var w=ee(n.tabbableGroups,function(I){var x=I.lastTabbableNode;return a===x});if(w<0&&(b.container===a||S(a,c.tabbableOptions)&&!k(a,c.tabbableOptions)&&!b.nextTabbableNode(a))&&(w=s),w>=0){var A=w===n.tabbableGroups.length-1?0:w+1,z=n.tabbableGroups[A];v=R(a)>=0?z.firstTabbableNode:z.firstDomTabbableNode}else L(o)||(v=b.nextTabbableNode(a))}}else v=T("fallbackFocus");return v},j=function(e){var a=B(e);if(!(N(a,e)>=0)){if(K(c.clickOutsideDeactivates,e)){h.deactivate({returnFocus:c.returnFocusOnDeactivate});return}K(c.allowOutsideClick,e)||e.preventDefault()}},H=function(e){var a=B(e),o=N(a,e)>=0;if(o||a instanceof Document)o&&(n.mostRecentlyFocusedNode=a);else{e.stopImmediatePropagation();var l,f=!0;if(n.mostRecentlyFocusedNode)if(R(n.mostRecentlyFocusedNode)>0){var v=N(n.mostRecentlyFocusedNode),s=n.containerGroups[v].tabbableNodes;if(s.length>0){var b=s.findIndex(function(p){return p===n.mostRecentlyFocusedNode});b>=0&&(c.isKeyForward(n.recentNavEvent)?b+1<s.length&&(l=s[b+1],f=!1):b-1>=0&&(l=s[b-1],f=!1))}}else n.containerGroups.some(function(p){return p.tabbableNodes.some(function(F){return R(F)>0})})||(f=!1);else f=!1;f&&(l=$({target:n.mostRecentlyFocusedNode,isBackward:c.isKeyBackward(n.recentNavEvent)})),g(l||n.mostRecentlyFocusedNode||E())}n.recentNavEvent=void 0},te=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n.recentNavEvent=e;var o=$({event:e,isBackward:a});o&&(L(e)&&e.preventDefault(),g(o))},M=function(e){(c.isKeyForward(e)||c.isKeyBackward(e))&&te(e,c.isKeyBackward(e))},q=function(e){be(e)&&K(c.escapeDeactivates,e)!==!1&&(e.preventDefault(),h.deactivate())},Y=function(e){var a=B(e);N(a,e)>=0||K(c.clickOutsideDeactivates,e)||K(c.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},V=function(){if(n.active)return X.activateTrap(m,h),n.delayInitialFocusTimer=c.delayInitialFocus?Z(function(){g(E())}):g(E()),u.addEventListener("focusin",H,!0),u.addEventListener("mousedown",j,{capture:!0,passive:!1}),u.addEventListener("touchstart",j,{capture:!0,passive:!1}),u.addEventListener("click",Y,{capture:!0,passive:!1}),u.addEventListener("keydown",M,{capture:!0,passive:!1}),u.addEventListener("keydown",q),h},W=function(){if(n.active)return u.removeEventListener("focusin",H,!0),u.removeEventListener("mousedown",j,!0),u.removeEventListener("touchstart",j,!0),u.removeEventListener("click",Y,!0),u.removeEventListener("keydown",M,!0),u.removeEventListener("keydown",q),h},ae=function(e){var a=e.some(function(o){var l=Array.from(o.removedNodes);return l.some(function(f){return f===n.mostRecentlyFocusedNode})});a&&g(E())},C=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ae):void 0,D=function(){C&&(C.disconnect(),n.active&&!n.paused&&n.containers.map(function(e){C.observe(e,{subtree:!0,childList:!0})}))};return h={get active(){return n.active},get paused(){return n.paused},activate:function(e){if(n.active)return this;var a=y(e,"onActivate"),o=y(e,"onPostActivate"),l=y(e,"checkCanFocusTrap");l||P(),n.active=!0,n.paused=!1,n.nodeFocusedBeforeActivation=u.activeElement,a==null||a();var f=function(){l&&P(),V(),D(),o==null||o()};return l?(l(n.containers.concat()).then(f,f),this):(f(),this)},deactivate:function(e){if(!n.active)return this;var a=Q({onDeactivate:c.onDeactivate,onPostDeactivate:c.onPostDeactivate,checkCanReturnFocus:c.checkCanReturnFocus},e);clearTimeout(n.delayInitialFocusTimer),n.delayInitialFocusTimer=void 0,W(),n.active=!1,n.paused=!1,D(),X.deactivateTrap(m,h);var o=y(a,"onDeactivate"),l=y(a,"onPostDeactivate"),f=y(a,"checkCanReturnFocus"),v=y(a,"returnFocus","returnFocusOnDeactivate");o==null||o();var s=function(){Z(function(){v&&g(U(n.nodeFocusedBeforeActivation)),l==null||l()})};return v&&f?(f(U(n.nodeFocusedBeforeActivation)).then(s,s),this):(s(),this)},pause:function(e){if(n.paused||!n.active)return this;var a=y(e,"onPause"),o=y(e,"onPostPause");return n.paused=!0,a==null||a(),W(),D(),o==null||o(),this},unpause:function(e){if(!n.paused||!n.active)return this;var a=y(e,"onUnpause"),o=y(e,"onPostUnpause");return n.paused=!1,a==null||a(),P(),V(),D(),o==null||o(),this},updateContainerElements:function(e){var a=[].concat(e).filter(Boolean);return n.containers=a.map(function(o){return typeof o=="string"?u.querySelector(o):o}),n.active&&P(),D(),this}},h.updateContainerElements(t),h};export{ge as c};
